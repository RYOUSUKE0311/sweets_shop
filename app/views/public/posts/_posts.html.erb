<table class="table table-striped">
  <thead>
    <tr>
      <th>画像</th>
      <th>タイトル</th>
      <th>詳細</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <% posts.each do |post| %>
      <tr>
        <td>
          <% if post.image.attached? %>
            <%= image_tag post.image.variant(resize: "120x120").processed %>
          <% else %>
            <%= image_tag "no_image.jpg", size: "120x120" %>
          <% end %>
        </td>
        <td><%= link_to post.title, post_path(post) %></td>
        <td><%= post.content.truncate(20) %></td>
        <td>
          <% if current_admin %>
            <% url = admin_post_path(post) %> 
          <% elsif current_user == post.user %>
            <% url = post_path(post) %>
          <% end %>
          <%= link_to "削除", url, method: :delete, 
              data: { confirm: "本当に削除しますか？" }, class: "btn btn-danger" %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>
<%= paginate posts %>